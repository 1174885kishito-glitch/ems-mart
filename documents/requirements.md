# **要件定義書 \- Spring Mart バックオフィス**

## **1\. 概要**

### **1.1. システム化の背景と目的**

ECサイト「Spring Mart」の急成長に伴い、現在Excelと手作業で行っている在庫管理と受発注処理が限界を迎えている。  
このプロセスをシステム化し、以下の目的を達成する。

1. **業務効率化:** 受注から在庫引き当てまでを自動化する。  
2. **データ整合性:** 在庫数のズレや注文漏れを防ぐ。  
3. **スケーラビリティ:** 将来の注文数増加に耐えうるAPI基盤を構築する。

### **1.2. システム利用者**

* **管理者 (Admin):** Spring Martの運営スタッフ。商品登録、在庫管理、注文確認を行う。  
* **一般ユーザー (User):** ECサイトのフロントエンド（※本プロジェクトの範囲外）からAPI経由で商品購入を行う顧客。

## **2\. 機能要件**

### **2.1. 認証機能**

| ID | 機能名 | 概要 | 担当 |
| :---- | :---- | :---- | :---- |
| F-001 | ログインAPI | ユーザーIDとパスワードを受け取り、認証が成功したらJWT（アクセストークン）を発行する。 | Step 2 |
| F-002 | API認証 | 特定のAPI（商品管理、注文など）は、リクエストヘッダーのJWTを検証し、認可されたユーザーのみ実行を許可する。 | Step 2 |

### 

### **2.2. 商品管理機能**

| ID | 機能名 | 概要 | 担当 |
| :---- | :---- | :---- | :---- |
| F-101 | 商品一覧取得 | 登録されている商品情報を一覧で取得する。 | Step 1 (提供済) |
| F-102 | 商品詳細取得 | 特定の商品IDの情報を取得する。 | Step 1 |
| F-103 | 商品登録 | 新しい商品を登録する。登録時、在庫テーブルにも初期在庫数を登録する。 | Step 1 |
| F-104 | 商品更新 | 既存の商品情報（価格、名前など）を更新する。 | Step 1 |
| F-105 | 商品削除 | 商品を削除する。（論理削除を推奨） | Step 1 |

### **2.3. 注文機能**

| ID | 機能名 | 概要 | 担当 |
| :---- | :---- | :---- | :---- |
| F-201 | 注文API | ユーザーIDと注文商品リスト（商品IDと数量）を受け取り、注文を作成する。 | Step 2 |
| F-202 | 在庫引き当て処理 | F-201の実行時、対象商品の在庫数を確認し、注文数分だけ在庫を減算する。 | Step 2 |
| F-203 | トランザクション制御 | 在庫引き当てと注文情報の登録（orders, order\_details）は、一連のトランザクションとして実行する。どちらかが失敗した場合、すべてロールバックする。 | Step 2 |

## **3\. 非機能要件**

| 項目 | 要件 | 担当 |
| :---- | :---- | :---- |
| セキュリティ | ・パスワードはハッシュ化（Bcrypt）してDBに保存する。 ・APIはJWTによって適切に保護・認可される。 | Step 2 |
| パフォーマンス | ・各APIのレスポンスタイムは、平均1秒以内を目指す。（学習目標） | \- |
| 環境 | ・すべてのコンポーネント（AP, DB, Web）はDocker (docker-compose) 上で動作すること。 | Step 1 |
| APIドキュメント | ・API仕様はSwagger (OpenAPI 3.0) 形式で記述され、Swagger UIで閲覧可能であること。 | Step 3 |

